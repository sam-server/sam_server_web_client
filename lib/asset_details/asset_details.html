<!DOCTYPE html>

<link rel="import" href="../../../packages/polymer/polymer.html">

<link rel="import" href="../../../packages/core_elements/core_input.html">
<link rel="import" href="../../../packages/core_elements/core_icons.html">

<link rel="import" href="../../../packages/polymer_ajax_form/ajax_form.html">

<link rel="import" href="../../../packages/cs_elements/inputs/money_input.html">
<link rel="import" href="../../../packages/cs_elements/qrcode/qrcode.html">

<link rel="import" href="../../../packages/cs_elements/form_controls/form_controls.html">

<polymer-element name="asset-details" attributes="qrcode formMethod">
	<template>
    <style>
      /*  FIXME: These don't work as expected.
       *  I've put them in a global stylesheet on asset.html
       */
      -webkit-distributed input[is=core-input]#name {
	      font-size: 2em;
	    }
	    -webkit-distributed input[is=core-input].editable {
	      border: 1px solid lightgrey;
	    }
	  
	    .invalid {
	      background-color: red;
	    }
	   
	    label {
	      color: blue; 
	    }
	  </style>
    <form is="ajax-form" id="assetForm"
          method="{{formMethod}}" 
          enctype="application/json"
          headers="{{session.sessionHeaders}}"
          layout vertical>
      
      <div id="nameContainer" layout horizontal>
        <content select="input[name=name]"></content>
        <cs-form-control-panel state="{{formControlState}}">
          <cs-form-control visibleState="disabled">
            <core-icon icon="create" on-click="{{editForm}}"></core-icon>
          </cs-form-control>
          <cs-form-control visibleState="enabled">
            <core-icon icon="save" on-click="{{saveForm}}"></core-icon>
          </cs-form-control>``
         <cs-form-control visibleState="enabled">
           <core-icon icon="cancel" on-click="{{resetForm}}"></core-icon>
         </cs-form-control>
        </cs-form-control-panel>
      </div>
      <div id="outputContainer" layout horizontal>
        <!-- Any smaller than 96x96 and the reader won't work. -->
        <cs-qrcode id="qrcode" value="{{qrcode}}"
                               correctionLevel="high"
                               width="96"
                               height="96">
        </cs-qrcode>
        
        <div id="detailsContainer" layout vertical>
          <content></content>
        </div>  
      </div>
      <input type="hidden" name="kind" value="assets#asset" />
    </form>
	</template>
	<script type="application/dart" src="asset_details.dart"></script>
</polymer-element>